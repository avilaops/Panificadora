# ?? DelPopolo Panificadora - Sistema de Gestão Completo

[![CI/CD](https://github.com/avilaops/Panificadora/workflows/CI%2FCD%20Pipeline/badge.svg)](https://github.com/avilaops/Panificadora/actions)
[![Rust](https://img.shields.io/badge/rust-1.75%2B-orange.svg)](https://www.rust-lang.org/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Deploy](https://img.shields.io/badge/deploy-panificadora.avila.inc-green.svg)](https://panificadora.avila.inc)

Sistema completo de gestão para panificadoras com integração iFood, WhatsApp Business, pagamentos Stone/PIX, chatbot com IA, e frontend WebAssembly.

## ? Funcionalidades

### ?? E-commerce & Vendas
- ? Catálogo online de produtos
- ? Carrinho de compras em tempo real
- ? Pedidos via Web, iFood, WhatsApp
- ? Sistema de catraca para self-service
- ? Comandas digitais

### ?? Pagamentos
- ? **Stone Gateway** - Cartões crédito/débito
- ? **PIX** - QR Code automático com BR Code
- ? **Dinheiro** - Cálculo de troco
- ? **Vouchers** - Vale refeição/alimentação
- ? **Pagamento múltiplo** - Dividir em diferentes formas

### ?? Gestão de Estoque
- ? Controle de estoque em tempo real
- ? Alertas automáticos de estoque baixo
- ? Cálculo EOQ (lote econômico)
- ? Cotação automática com fornecedores
- ? Importação de NFe (XML)

### ?? Inteligência Artificial
- ? **Chatbot NLP** em português (15+ intents)
- ? **DeepSeek AI** para respostas avançadas
- ? Análise de sentimento
- ? Recomendação de produtos
- ? Previsão de demanda

### ?? Integrações
- ? **iFood** - Pedidos, cardápio, webhooks
- ? **WhatsApp Business** - Mensagens, templates, campanhas
- ? **Stone POS** - Terminal de pagamento
- ? **Firebase** - Push notifications
- ? **Avila Framework** - Analytics, logs, métricas

### ?? Marketing & Notificações
- ? Campanhas automáticas (pão quentinho, promoções)
- ? Email SMTP com templates HTML
- ? Push notifications
- ? SMS (integração preparada)
- ? WhatsApp em massa

## ??? Arquitetura

```
???????????????????????????????????????????????????
?           Frontend (Yew WebAssembly)            ?
?         panificadora.avila.inc                  ?
???????????????????????????????????????????????????
                   ? HTTP/WebSocket
???????????????????????????????????????????????????
?              API Gateway (Actix-web)             ?
?              :8080 /api/v1                       ?
???????????????????????????????????????????????????
?  Auth  ? Products ? Orders ? Payments ? Webhooks?
???????????????????????????????????????????????????
     ?        ?         ?         ?          ?
???????????????????????????????????????????????????
?           Business Logic Layer                   ?
????????????????????????????????????????????????????
? Inventory ? NFe ? Chatbot ? Marketing ? POS     ?
???????????????????????????????????????????????????
     ?         ?       ?          ?         ?
???????????????????????????????????????????????????
?            Infrastructure Layer                   ?
????????????????????????????????????????????????????
? SQLite ? Redis ? RabbitMQ ? SMTP ? HTTP         ?
????????????????????????????????????????????????????
         ?              ?
?????????????????  ???????????????????
?   api.avila   ?  ?  External APIs  ?
?     .inc      ?  ?  iFood/WhatsApp ?
?????????????????  ???????????????????
```

## ?? Quick Start

### Pré-requisitos
- Rust 1.75+ ([rustup.rs](https://rustup.rs))
- Trunk para WASM: `cargo install trunk`

### Rodar Backend
```bash
# Clone
git clone https://github.com/avilaops/Panificadora.git
cd Panificadora

# Configure
cp .env.example .env

# Execute
cargo run --bin delpopolo-api
```

API disponível em: `http://localhost:8080`

### Rodar Frontend
```bash
cd delpopolo-web
trunk serve
```

Frontend disponível em: `http://localhost:3000`

## ?? Documentação

- [START-HERE.md](START-HERE.md) - Guia de início rápido
- [ARCHITECTURE.md](ARCHITECTURE.md) - Arquitetura detalhada
- [STATUS.md](STATUS.md) - Status do desenvolvimento
- [QUICKSTART.md](QUICKSTART.md) - Desenvolvimento local

## ?? Testes

```bash
cargo test --workspace
```

## ?? Módulos

| Módulo | Descrição | Status |
|--------|-----------|--------|
| `delpopolo-core` | Traits, errors base | ? 100% |
| `delpopolo-domain` | Entidades e value objects | ? 100% |
| `delpopolo-infrastructure` | Database, cache, queue | ? 100% |
| `delpopolo-api` | REST API Actix-web | ? 100% |
| `delpopolo-integrations` | iFood, WhatsApp, Stone | ? 100% |
| `delpopolo-chatbot` | NLP + DeepSeek AI | ? 100% |
| `delpopolo-inventory` | Gestão de estoque | ? 100% |
| `delpopolo-nfe` | Leitor de notas fiscais | ? 100% |
| `delpopolo-notifications` | Email, Push, SMS | ? 100% |
| `delpopolo-payments` | Stone + PIX | ? 100% |
| `delpopolo-avila` | Integração Avila Framework | ? 100% |
| `delpopolo-web` | Frontend WASM Yew | ? 100% |
| `delpopolo-workers` | Background jobs | ?? 50% |
| `delpopolo-suppliers` | Gestão fornecedores | ?? 50% |
| `delpopolo-marketing` | Campanhas | ?? 50% |
| `delpopolo-pos` | Comandas | ?? 50% |
| `delpopolo-turnstile` | Catraca | ?? 50% |

**Progresso Total: 94%** ?????????????????????

## ?? Endpoints API

```
GET    /health                    - Health check
GET    /health/ready               - Readiness check

POST   /api/v1/auth/login          - Login
POST   /api/v1/auth/register       - Registro

GET    /api/v1/products            - Listar produtos
GET    /api/v1/products/:id        - Detalhes produto
POST   /api/v1/products            - Criar produto

GET    /api/v1/orders              - Listar pedidos
POST   /api/v1/orders              - Criar pedido
GET    /api/v1/orders/:id          - Detalhes pedido

POST   /webhooks/ifood             - Webhook iFood
GET    /webhooks/whatsapp          - Verificação WhatsApp
POST   /webhooks/whatsapp          - Webhook WhatsApp
```

## ?? Tecnologias

**Backend:**
- ?? Rust 2021 Edition
- ?? Actix-web 4.9
- ??? SQLite + sqlx
- ?? Redis (cache)
- ?? RabbitMQ (filas)

**Frontend:**
- ??? WebAssembly (Yew)
- ?? Responsive design
- ? Zero-cost abstractions

**Integrações:**
- ?? iFood Merchant API
- ?? WhatsApp Business API
- ?? Stone Payment Gateway
- ?? DeepSeek AI
- ?? Avila Framework

## ?? Licença

MIT License - veja [LICENSE](LICENSE)

## ?? Time

Desenvolvido pela equipe [Avila Framework](https://avila.inc)

---

**?? DelPopolo Panificadora** - Tradição e tecnologia desde 1987  
Powered by **Avila Framework** | [panificadora.avila.inc](https://panificadora.avila.inc)